# On Premises add-on module release 1.22.13

Welcome to the latest release of `on-premises` module of [`Kubernetes Fury Distribution`](https://github.com/sighupio/fury-distribution) maintained by SIGHUP team.

This minor release adds the compatibility with Kubernetes 1.22.13 and some general enhancements.

## Package Versions ðŸš¢

| Package                                              | Supported Version | Previous Version  |
|------------------------------------------------------|-------------------|-------------------|
| [vmware-cm](katalog/vmware-cm)                       | `1.22.6`          | `Updated`         |
| [vmware-csi](katalog/vmware-csi)                     | `2.5.2`           | `Updated`         |
| [etcd](roles/etcd)                                   | `3.4.7`           | `No update`       |
| [haproxy](roles/haproxy)                             | `2.2`             | `No update`       |
| [containerd](roles/containerd)                       | `1.5.8`           | `No update`       |
| [docker](roles/docker)                               | `19.X`            | `No update`       |
| [kube-node-common](roles/kube-node-common)           | `-`               | `Updated`         |
| [kube-control-plane](roles/kube-control-plane)       | `-`               | `Updated`         |
| [kube-worker](roles/kube-worker)                     | `-`               | `No update`       |

## Update Guide ðŸ¦®

In this guide, we will try to summarize the update process from `v1.21.14` to this release.

> NOTE: Each on-premises environment can be different, always double-check before updating components.

1. Update the vSphere Controller Manager package if applicable (see below)
2. Update Kubernetes masters (see the [example playbooks](examples/playbooks))
3. Update workers (see the [example playbooks](examples/playbooks))
4. Update KFD if applicable (see the [KFD `1.22.x` release notes](https://github.com/sighupio/fury-distribution/tree/master/docs/releases))

## vsphere-cm

The vSphere controller manager update can be executed before upgrading the cluster version to v1.22.13. The current version is compatible with Kubernetes 1.22.x and its standard skew versions.

To upgrade, please run the following command:

```yaml
kustomize build <your-project-path-including-vmware-cm-as-base> | kubectl apply -f -
```

## vsphere-csi

The vSphere CSI driver update can be executed before upgrading the cluster version to v1.22.13.
The current version is compatible with Kubernetes 1.21.x to 1.23.x.

To upgrade, please run the following command:

```yaml
kustomize build <your-project-path-including-vmware-csi-as-base> | kubectl apply -f -
```
